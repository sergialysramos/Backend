<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>File Upload</h1>
<form action="/subir" method="POST" enctype="multipart/form-data">`
<input type="file" name="file" required>
<button type="submit">Subir</button>
</form>

<div id="gallery"></div>
<script>

    fetch('/imagenes')
    .then(response => response.json())
    .then(data => {
        console.log(data)
        let salida = ""
        data.url.forEach(file => {
            // const imagePatch = `http://localhost:3000/fotos/${filename}`;
            salida += 
            `<div class="gallery-item">
                <img src="${file}" style="width:200px">
                </div>`
        })
        document.getElementById('gallery').innerHTML = salida
    })
    .catch(error => console.error('error en la peticion de imagenes',error))
    


</script>
</body>
</html>